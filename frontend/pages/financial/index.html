<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financeiro - Journey 100k | Soluzione Giusta</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            .tabs-container {
                overflow-x: scroll;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            
            .tabs-container::-webkit-scrollbar {
                display: none;
            }
            
            .company-info-header {
                margin: 20px 0;
            }
            
            .company-stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .tab-item span {
                font-size: 0.8rem;
            }
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8fafc;
            color: #334155;
            overflow-x: hidden;
        }

        /* SIDEBAR - Mesma estrutura */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: linear-gradient(180deg, #1e293b 0%, #334155 100%);
            padding: 20px 0;
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 4px 0 20px rgba(0,0,0,0.1);
        }

        .sidebar.collapsed {
            width: 80px;
        }

        .logo {
            padding: 0 25px 30px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 30px;
        }

        .logo h1 {
            color: #fff;
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .sidebar.collapsed .logo h1 {
            opacity: 0;
        }

        .logo .rocket {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: block;
            margin-bottom: 10px;
        }

        .nav-menu {
            list-style: none;
            padding: 0 15px;
        }

        .nav-item {
            margin-bottom: 8px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 15px 15px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
        }

        .nav-link:hover,
        .nav-link.active {
            background: rgba(59, 130, 246, 0.15);
            color: #3b82f6;
            transform: translateX(5px);
        }

        .nav-link i {
            font-size: 1.2rem;
            margin-right: 15px;
            min-width: 20px;
            text-align: center;
        }

        .sidebar.collapsed .nav-link span {
            opacity: 0;
            width: 0;
        }

        .toggle-sidebar {
            position: absolute;
            top: 20px;
            right: -15px;
            width: 30px;
            height: 30px;
            background: #3b82f6;
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
        }

        .notification-dot {
            position: absolute;
            top: -2px;
            right: 8px;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            border: 1px solid white;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }

        /* MAIN CONTENT */
        .main-content {
            margin-left: 280px;
            transition: all 0.3s ease;
            min-height: 100vh;
        }

        .sidebar.collapsed + .main-content {
            margin-left: 80px;
        }

        /* HEADER */
        .header {
            background: white;
            padding: 20px 40px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .header-left h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 5px;
        }

        .header-left p {
            color: #64748b;
            font-size: 0.95rem;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .btn-secondary {
            background: #f8fafc;
            color: #64748b;
            border: 1px solid #e2e8f0;
        }

        /* OVERVIEW CARDS */
        .overview-section {
            padding: 40px;
        }

        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .overview-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            border: 1px solid #f1f5f9;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .overview-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
        }

        .overview-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--accent-gradient);
        }

        .overview-card.revenue { --accent-gradient: linear-gradient(90deg, #10b981, #059669); }
        .overview-card.expenses { --accent-gradient: linear-gradient(90deg, #ef4444, #dc2626); }
        .overview-card.profit { --accent-gradient: linear-gradient(90deg, #3b82f6, #1d4ed8); }
        .overview-card.pending { --accent-gradient: linear-gradient(90deg, #f59e0b, #d97706); }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .card-icon {
            width: 70px;
            height: 70px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            background: var(--accent-gradient);
        }

        .card-value {
            font-size: 2.8rem;
            font-weight: 900;
            color: #1e293b;
            margin-bottom: 8px;
            line-height: 1;
        }

        .card-label {
            color: #64748b;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .card-change {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .card-change.positive {
            color: #10b981;
        }

        .card-change.negative {
            color: #ef4444;
        }

        .card-change.neutral {
            color: #64748b;
        }

        /* CHARTS SECTION */
        .charts-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .chart-card {
            background: white;
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            border: 1px solid #f1f5f9;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .chart-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #1e293b;
        }

        .chart-controls {
            display: flex;
            gap: 10px;
        }

        .chart-control {
            padding: 8px 16px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #64748b;
        }

        .chart-control.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        /* TRANSACTIONS SECTION */
        .transactions-section {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            margin-bottom: 40px;
        }

        .transactions-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            border: 1px solid #f1f5f9;
            overflow: hidden;
        }

        .transactions-header {
            padding: 25px 30px;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fafbfc;
        }

        .transactions-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #1e293b;
        }

        .transactions-filters {
            display: flex;
            gap: 10px;
        }

        .filter-btn {
            padding: 6px 12px;
            background: transparent;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #64748b;
        }

        .filter-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .transactions-list {
            max-height: 600px;
            overflow-y: auto;
        }

        .transaction-item {
            display: flex;
            align-items: center;
            padding: 20px 30px;
            border-bottom: 1px solid #f8fafc;
            transition: all 0.3s ease;
        }

        .transaction-item:hover {
            background: #fafbfc;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            margin-right: 15px;
            color: white;
        }

        .transaction-icon.income {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .transaction-icon.expense {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .transaction-icon.pending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .transaction-details {
            flex: 1;
            margin-right: 15px;
        }

        .transaction-title {
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .transaction-subtitle {
            font-size: 0.85rem;
            color: #64748b;
        }

        .transaction-amount {
            font-size: 1.1rem;
            font-weight: 700;
            text-align: right;
        }

        .transaction-amount.positive {
            color: #10b981;
        }

        .transaction-amount.negative {
            color: #ef4444;
        }

        .transaction-amount.pending {
            color: #f59e0b;
        }

        .transaction-date {
            font-size: 0.8rem;
            color: #94a3b8;
            text-align: right;
            margin-top: 4px;
        }

        /* URGENT ACCOUNTS */
        .urgent-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            border: 1px solid #f1f5f9;
            overflow: hidden;
        }

        .urgent-header {
            padding: 25px 30px;
            border-bottom: 1px solid #f1f5f9;
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .urgent-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #991b1b;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .urgent-count {
            background: #ef4444;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .urgent-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .urgent-item {
            padding: 20px 30px;
            border-bottom: 1px solid #f8fafc;
            transition: all 0.3s ease;
            background: linear-gradient(90deg, rgba(255,245,245,0.5), rgba(255,255,255,0.5));
        }

        .urgent-item:hover {
            background: linear-gradient(90deg, rgba(255,235,235,0.8), rgba(255,245,245,0.8));
        }

        .urgent-item:last-child {
            border-bottom: none;
        }

        .urgent-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .urgent-info h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 4px;
        }

        .urgent-info p {
            font-size: 0.85rem;
            color: #64748b;
        }

        .urgent-amount {
            text-align: right;
        }

        .urgent-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: #ef4444;
            margin-bottom: 4px;
        }

        .urgent-due {
            font-size: 0.8rem;
            color: #991b1b;
            font-weight: 600;
        }

        .overdue {
            color: #dc2626 !important;
            font-weight: 700 !important;
        }

        /* MODAL */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 40px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: all 0.3s ease;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal.show .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 35px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f1f5f9;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 800;
            color: #1e293b;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 5px;
        }

        .modal-close:hover {
            color: #ef4444;
            transform: scale(1.1);
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .form-group.full {
            grid-column: 1 / -1;
        }

        .form-label {
            font-weight: 700;
            color: #374151;
            font-size: 0.95rem;
        }

        .form-input,
        .form-select,
        .form-textarea {
            padding: 14px 18px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fafbfc;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
            background: white;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 40px;
            padding-top: 25px;
            border-top: 2px solid #f1f5f9;
        }

        /* QUICK ACTIONS */
        .quick-actions {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 1000;
        }

        .fab {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 1.6rem;
            cursor: pointer;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fab:hover {
            transform: scale(1.1);
        }

        .fab.primary {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }

        .fab.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .fab.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        /* COMPANY TABS */
        .company-tabs-section {
            background: white;
            border-bottom: 1px solid #e2e8f0;
            position: sticky;
            top: 81px;
            z-index: 90;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .tabs-container {
            max-width: 100%;
            overflow-x: auto;
            padding: 0 40px;
        }

        .tabs-header {
            display: flex;
            gap: 5px;
            min-width: max-content;
            padding: 20px 0 0;
        }

        .tab-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 12px 12px 0 0;
            font-weight: 600;
            color: #64748b;
            position: relative;
            white-space: nowrap;
            background: #f8fafc;
            border: 2px solid transparent;
            border-bottom: none;
        }

        .tab-item:hover {
            color: #3b82f6;
            background: #f1f5f9;
            transform: translateY(-2px);
        }

        .tab-item.active {
            color: #3b82f6;
            background: white;
            border-color: #e2e8f0;
            border-bottom: 2px solid white;
            transform: translateY(2px);
        }

        .tab-item i {
            font-size: 1.1rem;
        }

        .tab-indicator {
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .tab-item.active .tab-indicator {
            opacity: 1;
        }

        /* COMPANY INFO HEADER */
        .company-info-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 25px 30px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 16px;
            border: 1px solid #e2e8f0;
        }

        .company-details h3 {
            font-size: 1.4rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 5px;
        }

        .company-details p {
            color: #64748b;
            font-size: 0.95rem;
        }

        .company-stats {
            display: flex;
            gap: 30px;
        }

        .stat-mini {
            text-align: center;
        }

        .stat-mini-value {
            display: block;
            font-size: 1.8rem;
            font-weight: 800;
            color: #3b82f6;
            line-height: 1;
        }

        .stat-mini-label {
            font-size: 0.8rem;
            color: #64748b;
            font-weight: 600;
        }
        @media (max-width: 1024px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .transactions-section {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .overview-section {
                padding: 20px;
            }
            
            .overview-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 15px 20px;
            }
            
            .header-actions {
                flex-wrap: wrap;
                gap: 10px;
            }
        }

        /* ANIMATIONS */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .overview-card {
            animation: slideInUp 0.8s ease forwards;
        }

        .overview-card:nth-child(1) { animation-delay: 0.1s; }
        .overview-card:nth-child(2) { animation-delay: 0.2s; }
        .overview-card:nth-child(3) { animation-delay: 0.3s; }
        .overview-card:nth-child(4) { animation-delay: 0.4s; }
    </style>
</head>
<body>
    <!-- SIDEBAR -->
    <nav class="sidebar" id="sidebar">
        <button class="toggle-sidebar" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>
        
        <div class="logo">
            <i class="fas fa-rocket rocket"></i>
            <h1>Journey 100k</h1>
        </div>
        
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-chart-pie"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="employees.html" class="nav-link">
                    <i class="fas fa-users"></i>
                    <span>Funcionários</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-project-diagram"></i>
                    <span>Projetos</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link active">
                    <i class="fas fa-dollar-sign"></i>
                    <span>Financeiro</span>
                    <div class="notification-dot"></div>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-comments"></i>
                    <span>Chat</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-clock"></i>
                    <span>Ponto Digital</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-file-alt"></i>
                    <span>Documentos</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-chart-bar"></i>
                    <span>Relatórios</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-trophy"></i>
                    <span>Gamificação</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-cog"></i>
                    <span>Configurações</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <!-- HEADER -->
        <header class="header">
            <div class="header-left">
                <h2>Gestão Financeira</h2>
                <p>Controle completo das finanças do Grupo Soluzione Giusta</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary" onclick="exportFinancial()">
                    <i class="fas fa-download"></i>
                    Exportar
                </button>
                <button class="btn btn-success" onclick="openIncomeModal()">
                    <i class="fas fa-plus"></i>
                    Nova Receita
                </button>
                <button class="btn btn-danger" onclick="openExpenseModal()">
                    <i class="fas fa-minus"></i>
                    Nova Despesa
                </button>
            </div>
        </header>

        <!-- COMPANY TABS SECTION -->
        <section class="company-tabs-section">
            <div class="tabs-container">
                <div class="tabs-header">
                    <div class="tab-item active" onclick="switchCompany('all')" data-company="all">
                        <i class="fas fa-chart-line"></i>
                        <span>Consolidado</span>
                        <div class="tab-indicator"></div>
                    </div>
                    <div class="tab-item" onclick="switchCompany('soluzione-giusta')" data-company="soluzione-giusta">
                        <i class="fas fa-building"></i>
                        <span>Soluzione Giusta</span>
                        <div class="tab-indicator"></div>
                    </div>
                    <div class="tab-item" onclick="switchCompany('sg-tech')" data-company="sg-tech">
                        <i class="fas fa-laptop-code"></i>
                        <span>SG Tech</span>
                        <div class="tab-indicator"></div>
                    </div>
                    <div class="tab-item" onclick="switchCompany('sg-marketing')" data-company="sg-marketing">
                        <i class="fas fa-bullhorn"></i>
                        <span>SG Marketing</span>
                        <div class="tab-indicator"></div>
                    </div>
                    <div class="tab-item" onclick="switchCompany('sg-consultoria')" data-company="sg-consultoria">
                        <i class="fas fa-handshake"></i>
                        <span>SG Consultoria</span>
                        <div class="tab-indicator"></div>
                    </div>
                    <div class="tab-item" onclick="switchCompany('sg-digital')" data-company="sg-digital">
                        <i class="fas fa-globe"></i>
                        <span>SG Digital</span>
                        <div class="tab-indicator"></div>
                    </div>
                    <div class="tab-item" onclick="switchCompany('sg-inovacao')" data-company="sg-inovacao">
                        <i class="fas fa-lightbulb"></i>
                        <span>SG Inovação</span>
                        <div class="tab-indicator"></div>
                    </div>
                    <div class="tab-item" onclick="switchCompany('sg-investimentos')" data-company="sg-investimentos">
                        <i class="fas fa-coins"></i>
                        <span>SG Investimentos</span>
                        <div class="tab-indicator"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- OVERVIEW SECTION -->
        <section class="overview-section">
            <div class="company-info-header" id="companyInfoHeader">
                <div class="company-details">
                    <h3 id="currentCompanyName">Visão Consolidada - Grupo Soluzione Giusta</h3>
                    <p id="currentCompanyDescription">Todas as empresas do grupo • Dados consolidados</p>
                </div>
                <div class="company-stats">
                    <div class="stat-mini">
                        <span class="stat-mini-value" id="companyEmployeeCount">19</span>
                        <span class="stat-mini-label">Funcionários</span>
                    </div>
                    <div class="stat-mini">
                        <span class="stat-mini-value" id="companyProjectCount">47</span>
                        <span class="stat-mini-label">Projetos</span>
                    </div>
                </div>
            </div>

            <!-- OVERVIEW CARDS -->
            <div class="overview-grid" id="overviewGrid">
                <div class="overview-card revenue">
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="fas fa-arrow-up"></i>
                        </div>
                    </div>
                    <div class="card-value">R$ 2.847.250</div>
                    <div class="card-label">Receitas do Mês</div>
                    <div class="card-change positive">
                        <i class="fas fa-trending-up"></i>
                        +18.2% vs mês anterior
                    </div>
                </div>

                <div class="overview-card expenses">
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="fas fa-arrow-down"></i>
                        </div>
                    </div>
                    <div class="card-value">R$ 1.892.750</div>
                    <div class="card-label">Despesas do Mês</div>
                    <div class="card-change negative">
                        <i class="fas fa-trending-up"></i>
                        +8.5% vs mês anterior
                    </div>
                </div>

                <div class="overview-card profit">
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                    </div>
                    <div class="card-value">R$ 954.500</div>
                    <div class="card-label">Lucro Líquido</div>
                    <div class="card-change positive">
                        <i class="fas fa-trending-up"></i>
                        +33.6% margem
                    </div>
                </div>

                <div class="overview-card pending">
                    <div class="card-header">
                        <div class="card-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                    <div class="card-value">R$ 425.680</div>
                    <div class="card-label">Contas Pendentes</div>
                    <div class="card-change neutral">
                        <i class="fas fa-exclamation-triangle"></i>
                        7 contas vencendo
                    </div>
                </div>
            </div>

            <!-- CHARTS SECTION -->
            <div class="charts-section">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Fluxo de Caixa</h3>
                        <div class="chart-controls">
                            <div class="chart-control active" onclick="changeChartPeriod('6m')">6M</div>
                            <div class="chart-control" onclick="changeChartPeriod('1y')">1A</div>
                            <div class="chart-control" onclick="changeChartPeriod('2y')">2A</div>
                        </div>
                    </div>
                    <canvas id="cashFlowChart" height="100"></canvas>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Despesas por Categoria</h3>
                    </div>
                    <canvas id="expensesChart" height="200"></canvas>
                </div>
            </div>

            <!-- TRANSACTIONS SECTION -->
            <div class="transactions-section">
                <div class="transactions-card">
                    <div class="transactions-header">
                        <h3 class="transactions-title">Transações Recentes</h3>
                        <div class="transactions-filters">
                            <button class="filter-btn active" onclick="filterTransactions('all')">Todas</button>
                            <button class="filter-btn" onclick="filterTransactions('income')">Receitas</button>
                            <button class="filter-btn" onclick="filterTransactions('expense')">Despesas</button>
                            <button class="filter-btn" onclick="filterTransactions('pending')">Pendentes</button>
                        </div>
                    </div>
                    <div class="transactions-list" id="transactionsList">
                        <!-- Transações serão carregadas aqui -->
                    </div>
                </div>

                <div class="urgent-card">
                    <div class="urgent-header">
                        <h3 class="urgent-title">
                            <i class="fas fa-exclamation-triangle"></i>
                            Contas Urgentes
                        </h3>
                        <div class="urgent-count" id="urgentCount">7</div>
                    </div>
                    <div class="urgent-list" id="urgentList">
                        <!-- Contas urgentes serão carregadas aqui -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- MODAL RECEITA -->
    <div class="modal" id="incomeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Nova Receita</h3>
                <button class="modal-close" onclick="closeModal('incomeModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="incomeForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Descrição</label>
                        <input type="text" class="form-input" id="incomeDescription" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" class="form-input" id="incomeAmount" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Empresa</label>
                        <select class="form-select" id="incomeCompany" required>
                            <option value="">Selecione...</option>
                            <option value="soluzione-giusta">Soluzione Giusta</option>
                            <option value="sg-tech">SG Tech</option>
                            <option value="sg-marketing">SG Marketing</option>
                            <option value="sg-consultoria">SG Consultoria</option>
                            <option value="sg-digital">SG Digital</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" id="incomeCategory" required>
                            <option value="">Selecione...</option>
                            <option value="vendas">Vendas</option>
                            <option value="servicos">Serviços</option>
                            <option value="consultoria">Consultoria</option>
                            <option value="licenciamento">Licenciamento</option>
                            <option value="outros">Outros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Recebimento</label>
                        <input type="date" class="form-input" id="incomeDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Cliente/Origem</label>
                        <input type="text" class="form-input" id="incomeClient">
                    </div>
                    <div class="form-group full">
                        <label class="form-label">Observações</label>
                        <textarea class="form-textarea" id="incomeNotes"></textarea>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('incomeModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-save"></i>
                        Salvar Receita
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL DESPESA -->
    <div class="modal" id="expenseModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Nova Despesa</h3>
                <button class="modal-close" onclick="closeModal('expenseModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="expenseForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Descrição</label>
                        <input type="text" class="form-input" id="expenseDescription" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Valor (R$)</label>
                        <input type="number" class="form-input" id="expenseAmount" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Empresa</label>
                        <select class="form-select" id="expenseCompany" required>
                            <option value="">Selecione...</option>
                            <option value="soluzione-giusta">Soluzione Giusta</option>
                            <option value="sg-tech">SG Tech</option>
                            <option value="sg-marketing">SG Marketing</option>
                            <option value="sg-consultoria">SG Consultoria</option>
                            <option value="sg-digital">SG Digital</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Categoria</label>
                        <select class="form-select" id="expenseCategory" required>
                            <option value="">Selecione...</option>
                            <option value="salarios">Salários</option>
                            <option value="aluguel">Aluguel</option>
                            <option value="marketing">Marketing</option>
                            <option value="tecnologia">Tecnologia</option>
                            <option value="impostos">Impostos</option>
                            <option value="outros">Outros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Data de Vencimento</label>
                        <input type="date" class="form-input" id="expenseDate" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Fornecedor</label>
                        <input type="text" class="form-input" id="expenseSupplier">
                    </div>
                    <div class="form-group full">
                        <label class="form-label">Observações</label>
                        <textarea class="form-textarea" id="expenseNotes"></textarea>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('expenseModal')">
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-danger">
                        <i class="fas fa-save"></i>
                        Salvar Despesa
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- QUICK ACTIONS -->
    <div class="quick-actions">
        <button class="fab success" onclick="openIncomeModal()" title="Nova Receita">
            <i class="fas fa-plus"></i>
        </button>
        <button class="fab danger" onclick="openExpenseModal()" title="Nova Despesa">
            <i class="fas fa-minus"></i>
        </button>
        <button class="fab primary" onclick="generateReport()" title="Gerar Relatório">
            <i class="fas fa-chart-bar"></i>
        </button>
    </div>

    <script>
        // =================================================================
        // DADOS FINANCEIROS POR EMPRESA
        // =================================================================

        // =================================================================
        // DADOS REAIS DAS EMPRESAS - GRUPO SOLUZIONE GIUSTA
        // =================================================================

        const companiesData = {
            'all': {
                id: 'all',
                name: 'Visão Consolidada - Grupo Soluzione Giusta',
                description: 'Todas as empresas do grupo • Dados consolidados',
                razaoSocial: 'Grupo Soluzione Giusta',
                cnpj: 'Consolidado',
                endereco: 'Av. São João, 2405, Sala 2401 – Jardim das Colinas – São José dos Campos/SP – CEP 12242-000',
                telefone: '(12) 99778-1488',
                email: 'pedro@soluzionegiusta.com.br',
                employees: 19,
                projects: 47,
                revenue: 2847250,
                expenses: 1892750,
                profit: 954500,
                pending: 425680
            },
            'soluzione-giusta': {
                id: 'soluzione-giusta',
                name: 'Soluzione Giusta',
                description: 'Empresa matriz • Holding do grupo',
                razaoSocial: 'Soluzione Giusta LTDA',
                cnpj: '41.516.960/0001-96',
                endereco: 'Av. São João, 2405, Sala 2401 – Jardim das Colinas – São José dos Campos/SP – CEP 12242-000',
                telefone: '(12) 99778-1488',
                email: 'pedro@soluzionegiusta.com.br',
                capitalSocial: 'R$ 5.000,00',
                inicioAtividades: '09/04/2021',
                regimeTributario: 'Lucro Presumido',
                employees: 5,
                projects: 12,
                revenue: 890000,
                expenses: 642000,
                profit: 248000,
                pending: 125000
            },
            'innovativa-comunicazione': {
                id: 'innovativa-comunicazione',
                name: 'Innovativa Comunicazione',
                description: 'Comunicação e marketing estratégico',
                razaoSocial: 'Innovativa LTDA',
                nomeFantasia: 'Innovativa Comunicazione',
                cnpj: '59.262.005/0001-35',
                endereco: 'Av. São João, 2405, Sala 2401 – Jardim das Colinas – São José dos Campos/SP – CEP 12242-000',
                telefone: '(12) 99778-1488',
                email: 'pedro@soluzionegiusta.com.br',
                capitalSocial: 'R$ 50.000,00',
                inicioAtividades: '03/02/2025',
                regimeTributario: 'Sem Enquadramento',
                employees: 3,
                projects: 8,
                revenue: 420000,
                expenses: 285000,
                profit: 135000,
                pending: 45000
            },
            'disbrigo-facile': {
                id: 'disbrigo-facile',
                name: 'Disbrigo Facile',
                description: 'Soluções empresariais facilitadas',
                razaoSocial: 'P. H. F. S. de Carvalho LTDA',
                nomeFantasia: 'Disbrigo Facile',
                cnpj: '50.676.635/0001-81',
                endereco: 'Av. São João, 2405, Sala 2401 – Jardim das Colinas – São José dos Campos/SP – CEP 12242-000',
                telefone: '(12) 99778-1488',
                email: 'pedro@soluzionegiusta.com.br',
                capitalSocial: 'R$ 1.000,00',
                inicioAtividades: '15/05/2023',
                regimeTributario: 'Simples Nacional',
                employees: 2,
                projects: 5,
                revenue: 180000,
                expenses: 125000,
                profit: 55000,
                pending: 25000
            },
            'mavie': {
                id: 'mavie',
                name: 'Mavie',
                description: 'Inovação e estilo de vida',
                razaoSocial: 'Mavie LTDA',
                nomeFantasia: 'Mavie',
                cnpj: '59.614.666/0001-82',
                endereco: 'Av. São João, 2405, Sala 2401 – Jardim das Colinas – São José dos Campos/SP – CEP 12242-000',
                telefone: '(12) 99778-1488',
                email: 'pedro@soluzionegiusta.com.br',
                capitalSocial: 'R$ 50.000,00',
                inicioAtividades: '24/02/2025',
                regimeTributario: 'Sem Enquadramento',
                employees: 2,
                projects: 3,
                revenue: 75000,
                expenses: 45000,
                profit: 30000,
                pending: 15000
            },
            'vero-construcao': {
                id: 'vero-construcao',
                name: 'Vero Construção',
                description: 'Construção civil e engenharia',
                razaoSocial: 'Vero Construção Civil LTDA',
                nomeFantasia: 'Vero Construção',
                cnpj: '59.622.059/0001-64',
                endereco: 'Av. São João, 2405, Sala 2401 – Jardim das Colinas – São José dos Campos/SP – CEP 12242-000',
                telefone: '(12) 99778-1488',
                email: 'pedro@soluzionegiusta.com.br',
                capitalSocial: 'R$ 50.000,00',
                inicioAtividades: '24/02/2025',
                regimeTributario: 'Sem Enquadramento',
                employees: 3,
                projects: 4,
                revenue: 650000,
                expenses: 485000,
                profit: 165000,
                pending: 85000
            },
            'via-giusta': {
                id: 'via-giusta',
                name: 'Premium Logística',
                description: 'Transporte e logística premium',
                razaoSocial: 'Via Giusta Trasporto e Logistica LTDA',
                nomeFantasia: 'Premium Logistica',
                cnpj: '59.625.920/0001-48',
                endereco: 'Av. São João, 2405, Sala 2401 – Jardim das Colinas – São José dos Campos/SP – CEP 12242-000',
                telefone: '(12) 99778-1488',
                email: 'pedro@soluzionegiusta.com.br',
                capitalSocial: 'R$ 50.000,00',
                inicioAtividades: '24/02/2025',
                regimeTributario: 'Sem Enquadramento',
                employees: 2,
                projects: 6,
                revenue: 580000,
                expenses: 425000,
                profit: 155000,
                pending: 65000
            },
            'meu-acesso': {
                id: 'meu-acesso',
                name: 'Meu Acesso',
                description: 'Hub de acesso e serviços digitais',
                razaoSocial: 'MEU ACESSO HUB LTDA',
                nomeFantasia: 'Meu Acesso',
                cnpj: '61.429.687/0001-70',
                endereco: 'Av. São João, 2405, Sala 2401 – Jardim das Colinas – São José dos Campos/SP – CEP 12242-000',
                telefone: '(12) 99778-1488',
                email: 'pedro@soluzionegiusta.com.br',
                capitalSocial: 'R$ 5.000,00',
                inicioAtividades: '10/06/2024',
                regimeTributario: 'Simples Nacional',
                employees: 2,
                projects: 5,
                revenue: 320000,
                expenses: 240000,
                profit: 80000,
                pending: 35000
            }
        };

        // FUNCIONÁRIOS REAIS ATUALIZADOS
        const realEmployees = [
            {
                id: 1,
                fullName: 'Pedro Fraquete',
                email: 'pedro@soluzionegiusta.com.br',
                position: 'CEO e Fundador',
                department: 'Diretoria',
                company: 'soluzione-giusta',
                role: 'super_admin',
                avatar: 'PF',
                notes: 'Fundador e CEO do grupo'
            },
            {
                id: 2,
                fullName: 'André Luiz Fernandes',
                email: 'andre@soluzionegiusta.com.br',
                position: 'Desenvolvedor Sênior',
                department: 'Tecnologia',
                company: 'soluzione-giusta',
                avatar: 'AF'
            },
            {
                id: 3,
                fullName: 'Caroline Lanzilotti da Silva',
                email: 'caroline@soluzionegiusta.com.br',
                position: 'Analista de Marketing',
                department: 'Marketing',
                company: 'innovativa-comunicazione',
                avatar: 'CS'
            },
            {
                id: 4,
                fullName: 'Élida Patricia',
                email: 'elida@soluzionegiusta.com.br',
                position: 'Coordenadora de RH',
                department: 'Recursos Humanos',
                company: 'soluzione-giusta',
                avatar: 'EP'
            },
            {
                id: 5,
                fullName: 'Leandro Cavalcante',
                email: 'leandro@soluzionegiusta.com.br',
                position: 'Analista Financeiro',
                department: 'Financeiro',
                company: 'soluzione-giusta',
                avatar: 'LC'
            },
            {
                id: 6,
                fullName: 'John Lenis da Silva Amorim',
                email: 'john@soluzionegiusta.com.br',
                position: 'Desenvolvedor Full Stack',
                department: 'Tecnologia',
                company: 'soluzione-giusta',
                avatar: 'JA'
            },
            {
                id: 7,
                fullName: 'Norma Julia de Oliveira',
                email: 'norma@soluzionegiusta.com.br',
                position: 'Secretária Executiva',
                department: 'Diretoria',
                company: 'soluzione-giusta',
                avatar: 'NO',
                notes: 'Secretária do Pedro Fraquete'
            },
            {
                id: 8,
                fullName: 'Vitória Maróstica Lunardelli',
                email: 'vitoria@soluzionegiusta.com.br',
                position: 'Designer Gráfica',
                department: 'Marketing',
                company: 'innovativa-comunicazione',
                avatar: 'VL'
            },
            {
                id: 9,
                fullName: 'Renata Bariani',
                email: 'renata@soluzionegiusta.com.br',
                position: 'Coordenadora Financeira e RH',
                department: 'Financeiro',
                company: 'soluzione-giusta',
                avatar: 'RB',
                notes: 'Responsável pelo financeiro e RH'
            },
            {
                id: 10,
                fullName: 'Leonardo',
                email: 'leonardo@soluzionegiusta.com.br',
                position: 'Desenvolvedor Backend',
                department: 'Tecnologia',
                company: 'soluzione-giusta',
                avatar: 'LE'
            },
            {
                id: 11,
                fullName: 'Maria Luiza',
                email: 'maria@soluzionegiusta.com.br',
                position: 'Analista Contábil',
                department: 'Financeiro',
                company: 'soluzione-giusta',
                avatar: 'ML'
            },
            {
                id: 12,
                fullName: 'Julia',
                email: 'julia@soluzionegiusta.com.br',
                position: 'Social Media',
                department: 'Marketing',
                company: 'innovativa-comunicazione',
                avatar: 'JU'
            },
            {
                id: 13,
                fullName: 'Camila Mantovani',
                email: 'camila@soluzionegiusta.com.br',
                position: 'Coordenadora de Projetos',
                department: 'Projetos',
                company: 'disbrigo-facile',
                avatar: 'CM'
            },
            {
                id: 14,
                fullName: 'Fernando',
                email: 'fernando@soluzionegiusta.com.br',
                position: 'Analista de Sistemas',
                department: 'Tecnologia',
                company: 'meu-acesso',
                avatar: 'FE'
            },
            {
                id: 15,
                fullName: 'Stanly',
                email: 'stanly@soluzionegiusta.com.br',
                position: 'Especialista em Vendas',
                department: 'Comercial',
                company: 'mavie',
                avatar: 'ST'
            },
            {
                id: 16,
                fullName: 'Samuel',
                email: 'samuel@soluzionegiusta.com.br',
                position: 'Desenvolvedor Frontend',
                department: 'Tecnologia',
                company: 'meu-acesso',
                avatar: 'SA'
            },
            {
                id: 17,
                fullName: 'Victor Caye',
                email: 'victor@soluzionegiusta.com.br',
                position: 'Analista de Suporte',
                department: 'Suporte',
                company: 'disbrigo-facile',
                avatar: 'VC'
            },
            {
                id: 18,
                fullName: 'Diego',
                email: 'diego@soluzionegiusta.com.br',
                position: 'Supervisor de Obras',
                department: 'Construção',
                company: 'vero-construcao',
                avatar: 'DI'
            },
            {
                id: 19,
                fullName: 'Filipe',
                email: 'filipe@soluzionegiusta.com.br',
                position: 'Motorista Logístico',
                department: 'Logística',
                company: 'via-giusta',
                avatar: 'FI'
            }
        ];

        const companiesFinancialData = companiesData;

        const transactionsByCompany = {
            'soluzione-giusta': [
                {
                    id: 1,
                    type: 'income',
                    description: 'Participação nos Lucros - SG Tech',
                    amount: 450000,
                    category: 'participacao',
                    client: 'SG Tech',
                    date: '2025-09-15',
                    status: 'confirmed'
                },
                {
                    id: 2,
                    type: 'expense',
                    description: 'Salários Diretoria',
                    amount: 142000,
                    category: 'salarios',
                    supplier: 'Folha de Pagamento',
                    date: '2025-09-22',
                    status: 'pending'
                },
                {
                    id: 3,
                    type: 'expense',
                    description: 'Aluguel Escritório Central',
                    amount: 25000,
                    category: 'aluguel',
                    supplier: 'Imobiliária Central',
                    date: '2025-09-25',
                    status: 'pending'
                }
            ],
            'sg-tech': [
                {
                    id: 4,
                    type: 'income',
                    description: 'Projeto Sistema ERP - Cliente ABC',
                    amount: 450000,
                    category: 'servicos',
                    client: 'Empresa ABC Ltda',
                    date: '2025-09-20',
                    status: 'confirmed'
                },
                {
                    id: 5,
                    type: 'income',
                    description: 'Desenvolvimento App Mobile',
                    amount: 350000,
                    category: 'servicos',
                    client: 'StartupTech',
                    date: '2025-09-19',
                    status: 'confirmed'
                },
                {
                    id: 6,
                    type: 'expense',
                    description: 'Salários Equipe Tech',
                    amount: 185000,
                    category: 'salarios',
                    supplier: 'Folha de Pagamento',
                    date: '2025-09-22',
                    status: 'pending'
                },
                {
                    id: 7,
                    type: 'expense',
                    description: 'Licenças Software',
                    amount: 45000,
                    category: 'tecnologia',
                    supplier: 'Microsoft Brasil',
                    date: '2025-09-26',
                    status: 'pending'
                }
            ],
            'sg-marketing': [
                {
                    id: 8,
                    type: 'income',
                    description: 'Campanha Digital - Cliente XYZ',
                    amount: 180000,
                    category: 'servicos',
                    client: 'XYZ Corporation',
                    date: '2025-09-21',
                    status: 'confirmed'
                },
                {
                    id: 9,
                    type: 'expense',
                    description: 'Salários Marketing',
                    amount: 98000,
                    category: 'salarios',
                    supplier: 'Folha de Pagamento',
                    date: '2025-09-22',
                    status: 'pending'
                },
                {
                    id: 10,
                    type: 'expense',
                    description: 'Campanhas Google Ads',
                    amount: 35000,
                    category: 'marketing',
                    supplier: 'Google Brasil',
                    date: '2025-09-24',
                    status: 'pending'
                }
            ],
            'sg-consultoria': [
                {
                    id: 11,
                    type: 'income',
                    description: 'Consultoria Estratégica',
                    amount: 120000,
                    category: 'consultoria',
                    client: 'Empresa DEF',
                    date: '2025-09-18',
                    status: 'confirmed'
                },
                {
                    id: 12,
                    type: 'expense',
                    description: 'Salários Consultoria',
                    amount: 85000,
                    category: 'salarios',
                    supplier: 'Folha de Pagamento',
                    date: '2025-09-22',
                    status: 'pending'
                }
            ],
            'sg-digital': [
                {
                    id: 13,
                    type: 'income',
                    description: 'E-commerce Setup',
                    amount: 45000,
                    category: 'servicos',
                    client: 'Loja Virtual ABC',
                    date: '2025-09-17',
                    status: 'confirmed'
                },
                {
                    id: 14,
                    type: 'expense',
                    description: 'Ferramentas Digitais',
                    amount: 15000,
                    category: 'tecnologia',
                    supplier: 'Shopify',
                    date: '2025-09-25',
                    status: 'pending'
                }
            ],
            'sg-inovacao': [
                {
                    id: 15,
                    type: 'income',
                    description: 'Projeto P&D - Edital FAPESP',
                    amount: 95000,
                    category: 'pesquisa',
                    client: 'FAPESP',
                    date: '2025-09-10',
                    status: 'confirmed'
                },
                {
                    id: 16,
                    type: 'expense',
                    description: 'Equipamentos Laboratório',
                    amount: 125000,
                    category: 'equipamentos',
                    supplier: 'TechLab',
                    date: '2025-09-28',
                    status: 'pending'
                }
            ],
            'sg-investimentos': [
                {
                    id: 17,
                    type: 'expense',
                    description: 'Aplicação Renda Fixa',
                    amount: 500000,
                    category: 'investimentos',
                    supplier: 'Banco BTG',
                    date: '2025-09-20',
                    status: 'confirmed'
                },
                {
                    id: 18,
                    type: 'expense',
                    description: 'Taxa de Administração',
                    amount: 12500,
                    category: 'taxas',
                    supplier: 'Corretora XP',
                    date: '2025-09-30',
                    status: 'pending'
                }
            ]
        };

        let currentCompany = 'all';
        let currentTransactions = [];

        let urgentAccounts = [
            {
                id: 1,
                description: 'Salários Setembro 2025',
                amount: 187320,
                dueDate: '2025-09-22',
                daysUntilDue: 0,
                status: 'overdue'
            },
            {
                id: 2,
                description: 'Aluguel Escritório São Paulo',
                amount: 12500,
                dueDate: '2025-09-25',
                daysUntilDue: 3,
                status: 'urgent'
            },
            {
                id: 3,
                description: 'Fornecedor ABC - Material',
                amount: 25750,
                dueDate: '2025-09-23',
                daysUntilDue: 1,
                status: 'urgent'
            },
            {
                id: 4,
                description: 'Campanha Google Ads',
                amount: 15000,
                dueDate: '2025-09-24',
                daysUntilDue: 2,
                status: 'urgent'
            },
            {
                id: 5,
                description: 'Licenças Software',
                amount: 8750,
                dueDate: '2025-09-26',
                daysUntilDue: 4,
                status: 'warning'
            },
            {
                id: 6,
                description: 'Impostos Federais - Q3',
                amount: 45800,
                dueDate: '2025-09-30',
                daysUntilDue: 8,
                status: 'warning'
            },
            {
                id: 7,
                description: 'Manutenção Servidores',
                amount: 6200,
                dueDate: '2025-10-01',
                daysUntilDue: 9,
                status: 'warning'
            }
        ];

        let filteredTransactions = [...transactions];
        let currentFilter = 'all';

        // =================================================================
        // FUNCIONALIDADES PRINCIPAIS
        // =================================================================

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('collapsed');
        }

        // Renderizar transações
        function renderTransactions() {
            const container = document.getElementById('transactionsList');
            
            if (filteredTransactions.length === 0) {
                container.innerHTML = `
                    <div style="padding: 40px; text-align: center; color: #64748b;">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;"></i>
                        <p>Nenhuma transação encontrada para esta empresa</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = filteredTransactions.map(transaction => {
                const isIncome = transaction.type === 'income';
                const isPending = transaction.status === 'pending';
                
                return `
                    <div class="transaction-item">
                        <div class="transaction-icon ${transaction.type}${isPending ? ' pending' : ''}">
                            <i class="fas fa-${isIncome ? 'arrow-up' : 'arrow-down'}"></i>
                        </div>
                        <div class="transaction-details">
                            <div class="transaction-title">${transaction.description}</div>
                            <div class="transaction-subtitle">
                                ${transaction.client || transaction.supplier || ''} • ${transaction.category}
                            </div>
                        </div>
                        <div>
                            <div class="transaction-amount ${isIncome ? 'positive' : 'negative'}${isPending ? ' pending' : ''}">
                                ${isIncome ? '+' : '-'}R$ ${transaction.amount.toLocaleString('pt-BR')}
                            </div>
                            <div class="transaction-date">${formatDate(transaction.date)}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Filtrar transações
        function filterTransactions(type) {
            currentFilter = type;
            
            // Atualizar botões
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[onclick="filterTransactions('${type}')"]`).classList.add('active');
            
            // Filtrar dados
            if (type === 'all') {
                filteredTransactions = [...currentTransactions];
            } else if (type === 'pending') {
                filteredTransactions = currentTransactions.filter(t => t.status === 'pending');
            } else {
                filteredTransactions = currentTransactions.filter(t => t.type === type);
            }
            
            renderTransactions();
        }

        // =================================================================
        // GRÁFICOS
        // =================================================================

        function createCashFlowChart() {
            const ctx = document.getElementById('cashFlowChart').getContext('2d');
            
            // Dados específicos por empresa ou consolidado
            let chartData;
            if (currentCompany === 'all') {
                chartData = {
                    labels: ['Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set'],
                    revenue: [1200000, 1450000, 1650000, 1800000, 2100000, 2350000, 2847250],
                    expenses: [950000, 1100000, 1250000, 1350000, 1500000, 1750000, 1892750]
                };
            } else {
                const company = companiesFinancialData[currentCompany];
                chartData = {
                    labels: ['Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set'],
                    revenue: Array(7).fill(0).map((_, i) => company.revenue * (0.7 + i * 0.05)),
                    expenses: Array(7).fill(0).map((_, i) => company.expenses * (0.8 + i * 0.03))
                };
            }
            
            window.cashFlowChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: chartData.labels,
                    datasets: [
                        {
                            label: 'Receitas',
                            data: chartData.revenue,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 4,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#10b981',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 3,
                            pointRadius: 6
                        },
                        {
                            label: 'Despesas',
                            data: chartData.expenses,
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            borderWidth: 4,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#ef4444',
                            pointBorderColor: '#fff',
                            pointBorderWidth: 3,
                            pointRadius: 6
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12,
                                    weight: 600
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.05)'
                            },
                            ticks: {
                                callback: function(value) {
                                    if (value >= 1000000) {
                                        return 'R$ ' + (value/1000000).toFixed(1) + 'M';
                                    } else if (value >= 1000) {
                                        return 'R$ ' + (value/1000).toFixed(0) + 'k';
                                    }
                                    return 'R$ ' + value.toLocaleString('pt-BR');
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        function createExpensesChart() {
            const ctx = document.getElementById('expensesChart').getContext('2d');
            
            window.expensesChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Salários', 'Marketing', 'Tecnologia', 'Aluguel', 'Impostos', 'Outros'],
                    datasets: [{
                        data: [42, 18, 15, 12, 8, 5],
                        backgroundColor: [
                            '#3b82f6',
                            '#10b981',
                            '#f59e0b',
                            '#ef4444',
                            '#8b5cf6',
                            '#6b7280'
                        ],
                        borderWidth: 0,
                        hoverBorderWidth: 4,
                        hoverBorderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 25,
                                usePointStyle: true,
                                font: {
                                    size: 11,
                                    weight: 600
                                }
                            }
                        }
                    },
                    cutout: '65%'
                }
            });
        }

        function changeChartPeriod(period) {
            // Atualizar botões
            document.querySelectorAll('.chart-control').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[onclick="changeChartPeriod('${period}')"]`).classList.add('active');
            
            // Aqui você atualizaria os dados do gráfico
            console.log('Alterando período para:', period);
        }

        // =================================================================
        // MODALS
        // =================================================================

        function openIncomeModal() {
            document.getElementById('incomeModal').classList.add('show');
        }

        function openExpenseModal() {
            document.getElementById('expenseModal').classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        // =================================================================
        // OUTRAS FUNCIONALIDADES
        // =================================================================

        function exportFinancial() {
            showNotification('Exportando dados financeiros...\n\n✅ Relatório completo\n✅ Formato Excel\n✅ Dados atualizados', 'info');
        }

        function generateReport() {
            showNotification('Gerando relatório financeiro automático...\n\n📊 Fluxo de caixa\n💰 Demonstrativo de resultados\n📈 Análises e projeções', 'success');
        }

        function getCompanyName(companyId) {
            const companies = {
                'soluzione-giusta': 'Soluzione Giusta',
                'sg-tech': 'SG Tech',
                'sg-marketing': 'SG Marketing',
                'sg-consultoria': 'SG Consultoria',
                'sg-digital': 'SG Digital'
            };
            return companies[companyId] || companyId;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        function showNotification(message, type) {
            alert(message); // Substituir por sistema de notificação real
        }

        // =================================================================
        // INICIALIZAÇÃO
        // =================================================================

        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar com dados consolidados
            switchCompany('all');
            
            // Renderizar contas urgentes (sempre consolidado)
            renderUrgentAccounts();
            
            // Criar gráficos
            createCashFlowChart();
            createExpensesChart();
            
            // Event listeners dos formulários
            document.getElementById('incomeForm').addEventListener('submit', function(e) {
                e.preventDefault();
                showNotification('Receita cadastrada com sucesso!', 'success');
                closeModal('incomeModal');
                // Aqui você salvaria no Supabase
            });
            
            document.getElementById('expenseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                showNotification('Despesa cadastrada com sucesso!', 'success');
                closeModal('expenseModal');
                // Aqui você salvaria no Supabase
            });
            
            // Fechar modals ao clicar fora
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('show');
                    }
                });
            });
            
            console.log('🚀 Módulo Financeiro carregado!');
            console.log('🏢 7 empresas configuradas');
            console.log('📊 Dados por empresa disponíveis');
            console.log('⚠️ Sistema de abas funcionando');
        });

        // =================================================================
        // SUPABASE INTEGRATION (COMENTADO PARA USO FUTURO)
        // =================================================================

        /*
        // Carregar dados financeiros do Supabase
        async function loadFinancialData() {
            try {
                const { data: transactionsData, error } = await supabase
                    .from('financial_transactions')
                    .select(`
                        *,
                        companies (
                            name
                        )
                    `)
                    .order('created_at', { ascending: false })
                    .limit(50);

                if (error) throw error;

                transactions = transactionsData.map(t => ({
                    id: t.id,
                    type: t.type,
                    description: t.description,
                    amount: t.amount,
                    company: t.company_id,
                    category: t.category,
                    client: t.client_supplier,
                    date: t.due_date.split('T')[0],
                    status: t.status
                }));

                filteredTransactions = [...transactions];
                renderTransactions();

            } catch (error) {
                console.error('Erro ao carregar dados financeiros:', error);
                showNotification('Erro ao carregar dados', 'error');
            }
        }

        // Salvar transação no Supabase
        async function saveTransaction(transactionData) {
            try {
                const { data, error } = await supabase
                    .from('financial_transactions')
                    .insert([{
                        type: transactionData.type,
                        description: transactionData.description,
                        amount: transactionData.amount,
                        company_id: transactionData.company,
                        category: transactionData.category,
                        client_supplier: transactionData.client || transactionData.supplier,
                        due_date: transactionData.date,
                        status: 'pending',
                        notes: transactionData.notes
                    }]);

                if (error) throw error;

                showNotification('Transação salva com sucesso!', 'success');
                loadFinancialData(); // Recarregar dados

            } catch (error) {
                console.error('Erro ao salvar transação:', error);
                showNotification('Erro ao salvar transação', 'error');
            }
        }
        */
    </script>
</body>
</html>